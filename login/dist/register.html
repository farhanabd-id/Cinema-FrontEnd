<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Cinema</title>
  <link rel="stylesheet" href="./style.css">
  <a href="/film/index.html" class="logo">
    <img src="/film/assets/images/logo.svg" alt="Filmlane logo">
  </a>

</head>
<body>
<!-- partial:index.partial.html -->
<div class="login-box">
  <h2>Register</h2>
  <form id="form-regist">
    <div class="user-box">
        <input id="name" type="text" name="name" required="">
        <label>Name</label>
      </div>
    <div class="user-box">
      <input id="user" type="text" name="username" required="">
      <label>Username</label>
    </div>
    <div class="user-box">
      <input id="pass" type="password" name="password" required="">
      <label>Password</label>
    </div>
    <button type="submit">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      Submit
    </button>
    <div></div>
  </form>
</div>

  
</body>
<script>

const formRegist = document.getElementById("form-regist")
formRegist.addEventListener('submit', (e)=>{
    e.preventDefault()
    const name = document.getElementById("name").value
    const uname = document.getElementById("user").value
    const pw = document.getElementById("pass").value
    console.log(name)
    console.log(uname)
    console.log(pw)
    var myHeaders = new Headers();
    myHeaders.append("Content-Type", "application/json");

    if (name == "" || uname == "" || pw == "") {
        alert('Please Fill So It Is Not Empty!')
    } else {
        var raw = JSON.stringify({
            "nama": name,
            "username": uname,
            "password": pw
            // "saldo" : 0
        });

        var requestOptions = {
            method: 'POST',
            headers: myHeaders,
            body: raw,
            redirect: 'follow'
        };

        fetch("http://127.0.0.1:5000/user/", requestOptions)
            .then(response => response.json())
            .then(result => {
                console.log(result)
                alert("Success Register! Please Login")
                window.location.href = '/login/dist/login.html'
            })
            .catch(error => console.log('error', error));
    }
})
</script>


</html>
